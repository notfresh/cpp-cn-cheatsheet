# C++中的lamda
看完C++中的lamda，感觉总体来说，不愧是 C++！一个lamda 都搞的可以玩出花来！！！  
下面我简单介绍一下lamda表达式在 c++ 中的语法。  
> 作为一个从 python 来的 c++ 人，我被C++的lambda 震惊了。


# 什么情况下会用 lambda 表达式呢? 
当我们需要一个函数对象的时候, 记住, 函数也可以是一个参数被传到某个位置, 经典的比如策略模式, 把函数当做一个参数传进去, 这是一种抽象的思维, 即过程也是一个虚拟实体, 参数不仅仅是一个数据,一个值,一个对象, 还可以是一个过程. 函数传过去, 然后对其调用即可.  

# 入门体验
以[]开头，lambda 语法可以生成一个临时的或者说匿名的函数对象，因此可以方便的支持函数式编程。
**不传参的版本**
```cpp
[]{
    //return 1; // 或者不return
    //也可以没有返回值
    cout << "hello lambda" << endl ;
}
```


**传参的版本**
```cpp
[](int i){
    cout << "hello lambda" << i << endl;
}
```

**指定返回值**
```cpp
[]()->int(int i){
    return i+1;
}
```
如果只有一句话，也就是一个return, 可以不指定返回类型，因为编译器可以推测出来。  

传参的场景, 比如当要遍历一个数组的时候, 可以把每个下标穿进去. 

# 最关键的技巧捕捉局部变量  
如果你因为lamda这就完了，那么就想错了， 其实开头那个`[]`它并不是摆设，它就是拿来获取局部变量的。  
在没有用`[]`之前，你只能获取全局变量，全局变量不是函数成员变量，而是一个编译单元，也就是一个源代码级别的天不管，地不收的变量，现在要获得局部变量，也就是lambda所在的{}以内的变量，就用`[]`传参, `[=]`表示使用全部的局部变量，但是以传值的方法，而`[&]`则表示以传引用的方法，这里需要注意的是，谨防对象已经被释放的情况，因为lambda 函数可以被传递出去！  

`[&]`和`[=]`还可以混用，比如`[&, i, j]`和 `[=, &i, &j]`， 以及 `[i, j]`, `[&i, &j]`, `[this]`  

捕获 this 指针 在成员函数中的 Lambda 表达式可以捕获当前对象的 this 指针，让 Lambda 表达式拥有和当前类成员同样的访问权限，可以修改类的成员变量，使用类的成员函数。
最后，this 指针只能按值捕获 [this] ，不能按引用捕获 [&this] 。

# 参考
[1] CCIA（C++并发编程实战）附录A，A.5 lambda表达式。  
[2] <https://blog.csdn.net/weixin_29181861/article/details/112122962>



